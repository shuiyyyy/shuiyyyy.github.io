---
layout:     post
title:      好用的JS代码片段
subtitle:   好用的JS代码片段
date:       2022-09-04
author:     shuiyyyy
header-img: img/post-bg-js-version.jpg
catalog:   true
tags:
    - 好用的JS代码片段
---
## 好用的代码片段

### 数组

#### 数组的简单去重
[代码片段源文档](https://www.30secondsofcode.org/js/s/unique-elements)

```JavaScript
const uniqueElements = arr => [...new Set(arr)];
Examples:
uniqueElements([1, 2, 2, 3, 4, 4, 5]); // [1, 2, 3, 4, 5]
```

#### 数组的任意结构对象去重
[代码片段源文档](https://www.30secondsofcode.org/js/s/unique-elements-by)
```JavaScript
/**
 * 
 * @param arr 源数据
 * @param fn 需要留下的数据比对规则
 * @returns 符合要求的数据
 */
const uniqueElementsBy = (arr, fn) =>
    arr.reduce((acc, v) => {
        if (!acc.some((x) => fn(v, x))) {
            acc.push(v);
        }
        return acc;
    }, []);
Examples:
uniqueElementsBy(
  [
    { id: 0, value: 'a' },
    { id: 1, value: 'b' },
    { id: 2, value: 'c' },
    { id: 1, value: 'd' },
    { id: 0, value: 'e' }
  ],
  (a, b) => a.id === b.id
); // [ { id: 0, value: 'a' }, { id: 1, value: 'b' }, { id: 2, value: 'c' } ]
```
#### 在 JavaScript for...of 循环中获取数组项的索引
[代码片段源文档](https://www.30secondsofcode.org/articles/s/javascript-index-for-of-loop)

```JavaScript
const items = ['a', 'b', 'c'];
for (let [index, item] of items.entries()) {
  console.log(`${index}: ${item}`);
}  // LOGS: 0: a, 1: b, 2: c
```

#### 从数组中获取最大值/最小值
```JavaScript
const nums = [2, 4, 6, 8, 1, 3, 5, 7];
Math.max(...nums); // 8
Math.min(...nums); // 1
const arr = [];
```
如果是复杂类型：
```JavaScript
const maxBy = (arr, fn) =>
  Math.max(...arr.map(typeof fn === 'function' ? fn : val => val[fn]));
Examples:
maxBy([{ n: 4 }, { n: 2 }, { n: 8 }, { n: 6 }], x => x.n); // 8
maxBy([{ n: 4 }, { n: 2 }, { n: 8 }, { n: 6 }], 'n'); // 8
```
如果想要复杂类型返回整个对象：（Max）
```JavaScript
[{ n: 4 }, { n: 2 }, { n: 8 }, { n: 6 }].reduce((pre, cur) => {
  return pre.n < cur.n ? cur : pre;
}); // { n: 8 }
```
如果想要复杂类型返回整个对象：（Min）
```JavaScript
[{ n: 4 }, { n: 2 }, { n: 8 }, { n: 6 }].reduce((pre, cur) => {
  return pre.n > cur.n ? cur : pre;
}); // { n: 2 }
```

